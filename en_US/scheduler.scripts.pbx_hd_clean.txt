scheduler.scripts.pbx_hd_clean = Free disk space
scheduler.scripts.pbx_hd_clean.description = <p>This script will try to delete unneeded files on main partition if it is about to be full.<p/><p>Usage: <p/><p><code>pbx_hd_clean [-a ASTLOGS_RATE] [-b BACKUPS_RATE] [-l LOG_MAX_SIZE] [-n BACKUPS_NUM] [-r RECORDINGS_RATE] [--modules MODULES] [-t THREASHOLD] [-s] [-v]</br/>pbx_hd_clean -h | --help | --list</code><p/><p>Optional arguments:</p><ul><li>-t THREASHOLD, --threashold THREASHOLD: Rate of used space at which we start cleaning. Defualt: 0.95</li><li>-a ASTLOGS_RATE, --astlogs-rate ASTLOGS_RATE: Maximal part of free disk space used for Asterisk logs. Defualt: 0.05</li><li>-b BACKUPS_RATE, --backups-rate BACKUPS_RATE: Maximal part of free disk space used for backups. Defualt: 0.20</li><li>-r RECORDINGS_RATE, --recordings-rate RECORDINGS_RATE: Maximal part of free disk space used for recordings. Defualt: 0.50</li><li>-l LOG_MAX_SIZE, --log-max-size LOG_MAX_SIZE: Size (MB) beyond which log file may be deleted. Default: 10MB<li>-n BACKUPS_NUM, --backups-num BACKUPS_NUM: number of backups to always avoid delete. Defualt: 2</li><li>--modules MODULES:     Comma-separate list of cleaner modules. Default: (all modules)</li></ul><p>Other options:</p><ul><li>-v, --verbose:        Be verbose</li><li>-d, --no-act:         Do nothing. Just print what is to be run</li><li>-s, --status:         Do nothing. Just show status</li><li>--list:               Do nothing. Just list cleaner modules</li></ul><p>Defaults should work fine. The defaults are set to be safe for systems with smaller disks. On larger ones the sum of the three rates (astlogs, backups and recordings) can be much closer to 1. E.g.: <code>--backups-rate 0.7</code> . If your backups include recordings, change their rates accordingly. E.g. <code>-b 0.5 -r 0.2</code> .</p><p>You can check command-line parameters by running the script from the shell (<code>/usr/share/ombutel/task-scripts/pbx_hd_clean</code> with either the parameter <code>-d</code> for a dry-run, or <code>-s</code> for a status report.</p>
